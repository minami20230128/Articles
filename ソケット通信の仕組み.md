# ソケット通信の仕組み
ソケットとは、プログラム上からプロセス間通信を行い、データ送受信するためのAPI。  
下記の2種類がある。  
**INETドメイン**...ソケットをIPアドレス・ポート番号に紐づける。TCP・UDP通信を用いて他のマシンとプロセス間通信を行うときに使う。  
**UNIXドメイン**...ソケットをファイルパスに紐づける。ファイルシステム上にデータの伝送を行う特殊な領域を作る。自マシン内でのプロセス間通信のみ。  

後者の方がスループットは圧倒的に高い。

## 通信方式
INETドメイン通信、UNIXドメイン通信それぞれに**ストリーム型**、**データグラム型**という方式がある。  

**ストリーム型**...データを一連の流れとして送信する。C言語の場合、SOCK_STREAMで指定。
INETドメイン通信におけるストリーム型はTCP通信そのもの。  
UNIXドメイン通信におけるストリーム型はTCP通信と似たやり方の別物。  

**データグラム型**...データをぶつ切りの塊として送る。C言語の場合、SOCK_DGRAMで指定。
INETドメイン通信におけるデータグラム型はUDP通信そのもの。  
UNIXドメイン通信におけるデータグラム型はUDP通信と似たやり方の別物。  

## ソケット通信の流れ
### サーバ側
1. create ソケットの作成  
2. bind ソケットを特定のIPアドレスとポートに紐付け  
3. listen 接続の待受を開始  
4. accept 接続を受信  
5. close 接続を切断  
   
### クライアント側
1. create ソケットの作成  
2. bind ソケットを特定のIPアドレスとポートに紐付け  
3. connect リモートソケットに接続  
4. close 接続を切断  
ただし、UDP通信の際はconnectは必要ない。


