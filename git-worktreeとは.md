# git-worktreeとは
ローカルで複数のリポジトリの作業ツリーを持てるコマンド。  

## 調べようと思った理由
業務で現在のイシューの作業をしている時に過去のイシューのコードを確認することが多く、いちいちstashするのが面倒だったため。  

- ツリーの作成  
現在のブランチは複製できないため、別ブランチに移動してから実行する。  
また、同じブランチのツリーを複数作ることはできない。  
```
git worktree add ツリーの作成先パス ブランチ名
```

- ツリーの一覧表示  
もとのブランチのパスもツリーの一つなので表示される。
```
git worktree list
```

- ツリーの削除  
rm -rfなどで消してしまうと、worktree上でツリーを消去したとはみなされないため、同じブランチのツリーを作成できなくなったり、listコマンドで出てきてしまったりする。  
そのため、本コマンドでの削除が必要。
```
git worktree remove
```

- ツリーの整理
誤ってrm -rfでツリーを消してしまった場合などに.git/worktreesを整理できる。
```
git worktree prune
```

- ツリーのディレクトリ移動
```
git worktree move 現在のディレクトリ 移動先ディレクトリ
```

## トラブルシューティング
- fatal: 'feature' is already checked outというエラーが発生した  
すでにツリーが存在するブランチの複製を行おうとしているため。  
現在のブランチもツリーの一つであるため、現在のブランチの複製を作ろうとしている場合もこれに当てはまるので別ブランチに移動してからツリーを作る。

- 新しいツリーを既存ツリーの下に作ると、既存ツリーの変更として認識されてしまう  
既存ツリーの中には作らない。別の場所に作る。

- ツリーを除去し、同ブランチの変更orコミットを別ツリーから見たい  
コミット内容は別ツリーでブランチ切り替えしても見れる。  
コミットしていない変更は見れない。